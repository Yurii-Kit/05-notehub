(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{1936:(e,t,n)=>{Promise.resolve().then(n.bind(n,8709)),Promise.resolve().then(n.bind(n,8298)),Promise.resolve().then(n.bind(n,3742)),Promise.resolve().then(n.bind(n,9776)),Promise.resolve().then(n.bind(n,7785)),Promise.resolve().then(n.bind(n,5979)),Promise.resolve().then(n.bind(n,9441)),Promise.resolve().then(n.bind(n,549)),Promise.resolve().then(n.bind(n,1043)),Promise.resolve().then(n.bind(n,1515)),Promise.resolve().then(n.bind(n,3455)),Promise.resolve().then(n.bind(n,5339)),Promise.resolve().then(n.bind(n,5947)),Promise.resolve().then(n.bind(n,6639))},3140:e=>{e.exports={backdrop:"Modal_backdrop__bLvvH",modal:"Modal_modal__nSuXm"}},4114:e=>{e.exports={pagination:"Pagination_pagination__O7JWM",active:"Pagination_active__awQnD"}},4410:e=>{e.exports={form:"NoteForm_form__kBK_0",formGroup:"NoteForm_formGroup__bS5ba",input:"NoteForm_input__28hgd",textarea:"NoteForm_textarea__kzing",select:"NoteForm_select__Go8Rq",actions:"NoteForm_actions__aG_Xr",submitButton:"NoteForm_submitButton__vSvUI",cancelButton:"NoteForm_cancelButton__c33li",error:"NoteForm_error__swtoj"}},4776:e=>{e.exports={text:"ErrorMessage_text__vJQtc"}},6964:e=>{e.exports={text:"Loader_text__JUtux"}},7621:(e,t,n)=>{"use strict";n.d(t,{FF:()=>i,GW:()=>a,Iy:()=>r,p4:()=>o});var s=n(5125);s.A.defaults.baseURL="https://notehub-public.goit.study/api/";let a=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return(await s.A.get("notes",{params:{search:e,page:t,perPage:n}})).data},o=async e=>(await s.A.post("notes",e)).data,r=async e=>(await s.A.delete("notes/".concat(e))).data,i=async e=>(await s.A.get("notes/".concat(e))).data},8024:e=>{e.exports={app:"NotesPage_app__UkSJw",toolbar:"NotesPage_toolbar__M7vho",button:"NotesPage_button__lzTbK"}},8212:e=>{e.exports={input:"SearchBox_input__0g6b5"}},8709:(e,t,n)=>{"use strict";n.d(t,{default:()=>W});var s=n(5155),a=n(2115),o=n(3455),r=n(4357),i=n(8212),l=n.n(i);function c(e){let{setQuery:t,setCurrentPage:n}=e,[o,i]=(0,a.useState)(""),[c]=(0,r.d7)(o,800);return(0,a.useEffect)(()=>{t(c),n(1)},[c,t,n]),(0,s.jsx)("input",{className:l().input,value:o,onChange:e=>i(e.target.value),placeholder:"Search notes"})}var u=n(5766),d=n.n(u),m=n(4114),_=n.n(m);function p(e){let{totalPages:t,currentPage:n,setCurrentPage:a}=e;return(0,s.jsx)(d(),{pageCount:t,pageRangeDisplayed:5,marginPagesDisplayed:1,onPageChange:e=>{let{selected:t}=e;return a(t+1)},forcePage:n-1,containerClassName:_().pagination,activeClassName:_().active,nextLabel:"→",previousLabel:"←"})}var h=n(6964),x=n.n(h);function b(){return(0,s.jsx)("p",{className:x().text,children:"Loading notes, please wait..."})}var g=n(4776),v=n.n(g);function N(e){let{error:t}=e;return(0,s.jsxs)("p",{className:v().text,children:["There was an error, please try again... ",null==t?void 0:t.message]})}var j=n(2619),f=n.n(j),y=n(9776),P=n(549),k=n(7621),C=n(9018),w=n.n(C);function F(e){let{notes:t}=e,n=(0,y.useQueryClient)(),a=(0,P.useMutation)({mutationFn:e=>(0,k.Iy)(e),onSuccess:()=>n.invalidateQueries({queryKey:["notes"]})});return(0,s.jsx)("main",{children:(0,s.jsx)("ul",{className:w().list,children:t.map(e=>(0,s.jsxs)("li",{className:w().listItem,children:[(0,s.jsx)("h2",{className:w().title,children:e.title}),(0,s.jsx)("p",{className:w().content,children:e.content}),(0,s.jsxs)("div",{className:w().footer,children:[(0,s.jsx)("span",{className:w().tag,children:e.tag}),(0,s.jsx)(f(),{className:w().link,href:"/notes/".concat(e.id),children:"View details"}),(0,s.jsx)("button",{className:w().button,onClick:()=>{let t;return t=e.id,a.mutate(t)},children:"Delete"})]})]},e.id))})})}var L=n(7650),S=n(3140),q=n.n(S);function B(e){let{onClose:t,children:n}=e;(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",e),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[t]);let o="undefined"!=typeof document?document.getElementById("modal-root"):null;return o?(0,L.createPortal)((0,s.jsx)("div",{onClick:e=>{e.target===e.currentTarget&&t()},className:q().backdrop,role:"dialog","aria-modal":"true",children:(0,s.jsx)("div",{className:q().modal,children:n})}),o):null}var E=n(1521),G=n(5068),K=n(4410),Q=n.n(K);let T=["Todo","Work","Personal","Meeting","Shopping"],I=G.Ik({title:G.Yj().min(3).max(50).required("Title is required"),content:G.Yj().max(500),tag:G.gl().oneOf(T).required("Tag is required")});function M(e){let{onClose:t}=e,n=(0,y.useQueryClient)(),a=(0,P.useMutation)({mutationFn:e=>(0,k.p4)(e),onSuccess:()=>{n.invalidateQueries({queryKey:["notes"]}),t()}});return(0,s.jsx)(E.l1,{initialValues:{title:"",content:"",tag:"Todo"},validationSchema:I,onSubmit:(e,t)=>{a.mutate(e),t.resetForm()},children:e=>{let{isSubmitting:n}=e;return(0,s.jsxs)(E.lV,{className:Q().form,children:[(0,s.jsxs)("div",{className:Q().formGroup,children:[(0,s.jsx)("label",{htmlFor:"title",children:"Title"}),(0,s.jsx)(E.D0,{id:"title",name:"title",type:"text",className:Q().input}),(0,s.jsx)(E.Kw,{name:"title",component:"span",className:Q().error})]}),(0,s.jsxs)("div",{className:Q().formGroup,children:[(0,s.jsx)("label",{htmlFor:"content",children:"Content"}),(0,s.jsx)(E.D0,{as:"textarea",id:"content",name:"content",rows:8,className:Q().textarea}),(0,s.jsx)(E.Kw,{name:"content",component:"span",className:Q().error})]}),(0,s.jsxs)("div",{className:Q().formGroup,children:[(0,s.jsx)("label",{htmlFor:"tag",children:"Tag"}),(0,s.jsx)(E.D0,{as:"select",id:"tag",name:"tag",className:Q().select,children:T.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(E.Kw,{name:"tag",component:"span",className:Q().error})]}),(0,s.jsxs)("div",{className:Q().actions,children:[(0,s.jsx)("button",{type:"button",className:Q().cancelButton,onClick:t,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:Q().submitButton,disabled:n,children:"Create note"})]})]})}})}var D=n(8024),A=n.n(D);function W(e){let{initialQuery:t,initialPage:n}=e,[r,i]=(0,a.useState)(t),[l,u]=(0,a.useState)(n),[d,m]=(0,a.useState)(!1),{data:_,isLoading:h,isError:x,error:g}=(0,o.useQuery)({queryKey:["notes",r,l],queryFn:()=>(0,k.GW)(r,l)});return(0,s.jsxs)("div",{className:A().app,children:[(0,s.jsxs)("header",{className:A().toolbar,children:[(0,s.jsx)(c,{setQuery:i,setCurrentPage:u}),_&&_.totalPages>1&&(0,s.jsx)(p,{totalPages:_.totalPages,currentPage:l,setCurrentPage:u}),(0,s.jsx)("button",{className:A().button,onClick:()=>m(!0),children:"Create note +"})]}),h&&(0,s.jsx)(b,{}),x&&(0,s.jsx)(N,{error:g}),_&&(0,s.jsx)(F,{notes:_.notes}),d&&(0,s.jsx)(B,{onClose:()=>m(!1),children:(0,s.jsx)(M,{onClose:()=>m(!1)})})]})}},9018:e=>{e.exports={list:"NoteList_list__shWPg",listItem:"NoteList_listItem__SuGUK",title:"NoteList_title__yrB3L",content:"NoteList_content__K8ntu",button:"NoteList_button__J1AiO",footer:"NoteList_footer__lWpqj",tag:"NoteList_tag__obj_m",link:"NoteList_link__Q73wC"}}},e=>{e.O(0,[843,22,346,619,393,441,255,358],()=>e(e.s=1936)),_N_E=e.O()}]);